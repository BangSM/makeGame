<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        #container {position:relative;width:500px;height:500px;background-color:#ebebeb}
        #item {background-color:red}
    </style>
</head>

<body>


<canvas id="container">

</canvas>
</body>
<script>
  (function(){
    var target = document.getElementById('container');

    var ctx = target.getContext("2d");

    var xy = [{x:0,y:0},{x:10,y:0}];

    xy.forEach(function(item){
      ctx.fillRect(item.x,item.y,10,5);
    });


    window.addEventListener('keydown',function(){
      var key = event.key;
      var OFFSETY = 5;
      var OFFSETX = 10;
      var MAXWIDTH = 290;
      var MAXHEIGHT = 145;
      var MINWIDTH = 0;
      var MINHEIGHT = 0;
      ctx.clearRect(0,0,target.width,target.height);

      xy.forEach(function(item, idx){
        if(key === 'ArrowUp'){
          item.y = item.y-OFFSETY;
          if(item.y < MINHEIGHT){
            item.y = MINHEIGHT;
          }

        }else if (key === 'ArrowDown'){
          item.y = item.y+OFFSETY;
          if(item.y > MAXHEIGHT){
            item.y = MAXHEIGHT;
          }

        }else if (key === 'ArrowRight'){
          render(idx);
          item.x = item.x+OFFSETX;

          if(item.x  > MAXWIDTH){
            item.x = MAXWIDTH;
          }

        }else{
          item.x = item.x-OFFSETX;
          if(item.x < MINWIDTH){
            item.x = MINWIDTH;
          }
        }

      });
      ctx.fillRect(xy.x,xy.y,10,5);
    });

    function render(idx){
      if(idx === 0){
        xy.shift();

      }

    }
  })()

</script>
</html>